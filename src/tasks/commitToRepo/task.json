{
    "$schema": "https://raw.githubusercontent.com/Microsoft/azure-pipelines-task-lib/master/tasks.schema.json",
    "id": "579190ac-ccd4-4451-a199-a6158001cf1a",
    "name": "mightoraCommitToRepo",
    "friendlyName": "Commit To Git Repository",
    "instanceNameFormat": "Commit To Git Repository",
    "description": "Effortlessly commit your pipeline's working directory changes to your Git repository. This task handles everything from staging all modifications to pushing them using secure authentication via the System.AccessToken variable. It simplifies the process of managing Git commits during your build or release pipeline, ensuring your repository is always up-to-date with the latest changes.",
    "helpMarkDown": "See [mightora.io](https://mightora.io)",
    "category": "Build",
    "author": "mightoraio",
    "version": {
        "Major": 2,
        "Minor": 2,
        "Patch": 19
    },
    "groups": [
        {
            "name": "inputGroup",
            "displayName": "Source",
            "isExpanded": true
        },
        {
            "name": "outputGroup",
            "displayName": "Output",
            "isExpanded": true
        }
    ],
    "inputs": [
        {
            "name": "commitMsg",
            "type": "string",
            "label": "Commit message",
            "defaultValue": "",
            "required": true,
            "helpMarkDown": "Commit message",
            "groupName": "inputGroup"
        },
        {
            "name": "branchName",
            "type": "string",
            "label": "Branch name",
            "defaultValue": "main",
            "required": true,
            "helpMarkDown": "Name of the branch to commit to",
            "groupName": "inputGroup"
        },
        {
            "name": "tags",
            "type": "string",
            "label": "Tags",
            "defaultValue": "",
            "required": false,
            "helpMarkDown": "Comma-separated list of tags to add to the commit",
            "groupName": "inputGroup"
        },
        {
            "name": "targetFolder",
            "type": "string",
            "label": "Target Folder(s)",
            "defaultValue": "",
            "required": false,
            "helpMarkDown": "Specific folder(s) to commit changes from. Supports multiple folders separated by commas (e.g., 'docs, src/app' or '$(Build.SourcesDirectory)/wiki-output, $(Build.SourcesDirectory)/docs'). If empty, all changes will be committed. ONLY specified folders will be committed.",
            "groupName": "inputGroup"
        },
        {
            "name": "createOrphanBranch",
            "type": "boolean",
            "label": "Create Orphan Branch",
            "defaultValue": "false",
            "required": false,
            "helpMarkDown": "If checked, creates an orphan branch (no history) containing ONLY the specified target folders. This is useful when you want a branch with only specific files and no connection to the main repository history. Note: This option only works when 'Target Folder(s)' is specified.",
            "groupName": "inputGroup"
        }
    ],
    "execution": {
        "PowerShell3": {
            "target": "powershell.ps1",
            "platforms": [
                "windows"
            ],
            "workingDirectory": "$(currentDirectory)"
        }
    }
}
